<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Список сокращений</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='konstruktor2.css') }}">
    <style>
        .action-button {
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            padding: 10px 20px;
            font-size: 16px;
            margin-right: 10px;
            border-radius: 5px;
            border: none;
            min-width: 100px;
        }

        .action-button:hover {
            background-color: #0056b3;
        }

        .bottom-left {
            position: fixed;
            bottom: 20px;
            left: 20px;
        }

        .bottom-right {
            position: fixed;
            bottom: 20px;
            right: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="sidebar">
        <div class="header-block">
            <h3>Панель редактирования</h3>
        </div>
        
        <h4>СПИСОК СОКРАЩЕНИЙ</h4>

        <label for="abbreviation-input">Аббревиатура:</label><br />
        <input type="text" id="abbreviation-input" class="form-element" placeholder="Введите аббревиатуру"><br /><br />
        
        <label for="fullname-input">Расшифровка:</label><br />
        <input type="text" id="fullname-input" class="form-element" placeholder="Введите расшифровку"><br /><br />

        <button id="publish-button" onclick="addAbbreviation()">Сохранить</button>
    </div>

    <div class="page-container">
        <div class="page-a4">
            <h4>Список сокращений и условных обозначений</h4>
            <table id="editableTable">
                <thead>
                    <tr>
                        <th>Аббревиатура</th>
                        <th>Полное название</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Кнопка "Назад" -->
<div class="bottom-left">
    <button id="back-button" class="action-button" onclick="history.back()">Назад</button>
</div>

<!-- Кнопка "Дальше" -->
<div class="bottom-right">
    <button id="next-button" class="action-button" onclick="goToKonstruktor5Page()">Дальше</button>
</div>

<script>
 function addAbbreviation() {
    const abbreviation = document.getElementById('abbreviation-input').value;
    const fullname = document.getElementById('fullname-input').value;
    
    if (abbreviation && fullname) {
        const tableBody = document.querySelector('#editableTable tbody');
        
        const newRow = document.createElement('tr');
        
        const abbreviationCell = document.createElement('td');
        abbreviationCell.textContent = abbreviation;
        
        const fullnameCell = document.createElement('td');
        fullnameCell.textContent = fullname;
        

        newRow.appendChild(abbreviationCell);
        newRow.appendChild(fullnameCell);
        
        tableBody.appendChild(newRow);
        
        document.getElementById('abbreviation-input').value = '';
        document.getElementById('fullname-input').value = '';
    } else {
        alert('Пожалуйста, заполните оба поля!');
    }
}

//МОЖНО СДЕЛАТЬ ЗАПРОС ВОТ ТАКИМ СПОСОБОМ, и сразу же делать запрос на получение
// async function addAbbreviation() {
//     const abbreviation = document.getElementById('abbreviation-input').value;
//     const fullname = document.getElementById('fullname-input').value;
    
//     if (abbreviation && fullname) {
//         try {
//             // Отправляем данные на сервер
//             const response = await fetch('/api/abbreviations', {
//                 method: 'POST',
//                 headers: {
//                     'Content-Type': 'application/json',
//                 },
//                 body: JSON.stringify({
//                     abbreviation: abbreviation,
//                     fullname: fullname
//                 })
//             });
            
//             if (!response.ok) {
//                 throw new Error('Ошибка при сохранении данных');
//             }
            
//             const savedData = await response.json();
            
//             // Добавляем новую строку в таблицу
//             const tableBody = document.querySelector('#editableTable tbody');
            
//             const newRow = document.createElement('tr');
            
//             const abbreviationCell = document.createElement('td');
//             abbreviationCell.textContent = savedData.abbreviation;
            
//             const fullnameCell = document.createElement('td');
//             fullnameCell.textContent = savedData.fullname;
            
//             newRow.appendChild(abbreviationCell);
//             newRow.appendChild(fullnameCell);
            
//             tableBody.appendChild(newRow);
            
//             // Очищаем поля ввода
//             document.getElementById('abbreviation-input').value = '';
//             document.getElementById('fullname-input').value = '';
            
//         } catch (error) {
//             console.error('Ошибка:', error);
//             alert('Произошла ошибка при сохранении: ' + error.message);
//         }
//     } else {
//         alert('Пожалуйста, заполните оба поля!');
//     }
// }
    
function goToKonstruktor5Page() {
        window.location.href =  "{{ url_for('konstruktor5_page') }}";
    }
</script>

</body>
</html>